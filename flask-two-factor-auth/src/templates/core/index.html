{% extends "_base.html" %}
{% block content %}

<h1 class="text-center">Welcome {{current_user.username}}!</h1>

<script>
let movements = 0;
let keystrokes = 0;
let scrolls = 0;

document.addEventListener('mousemove', () => { movements++; });
document.addEventListener('keydown', () => { keystrokes++; });
document.addEventListener('scroll', () => { scrolls++; });

setTimeout(() => {
    fetch("/behavior-data", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            movements: movements,
            keystrokes: keystrokes,
            scrolls: scrolls
        })
    })
    .then(response => response.json())
    .then(data => console.log("Behavior data sent:", data))
    .catch(err => console.error("Error sending behavior data:", err));
}, 10000);
</script>

{% endblock %}
